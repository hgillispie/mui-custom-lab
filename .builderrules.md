# .builderrules - Custom Component Library Creation

## ğŸ”´ PREREQUISITE: FONT CONFIGURATION IS MANDATORY!

### âš ï¸ BEFORE CREATING ANY COMPONENTS, YOU MUST:

1. **Import Figtree font** in your global CSS (at the VERY TOP)
   ```css
   @import url('https://fonts.googleapis.com/css2?family=Figtree:wght@300;400;500;600;700;800;900&display=swap');
   ```

2. **Configure Tailwind** to use Figtree as default
   ```javascript
   // tailwind.config.js
   fontFamily: {
     sans: ['Figtree', 'system-ui', 'sans-serif'],
   }
   ```

3. **Apply font globally** in your CSS
   ```css
   body {
     font-family: 'Figtree', system-ui, sans-serif;
   }
   ```

4. **Include 'font-sans'** in ALL component base styles

**VERIFICATION:** Inspect any text element - computed styles MUST show "Figtree" as the primary font!

## CRITICAL: New Component Creation Strategy

### Component Creation Approach
- **Create custom components from scratch** that match Material UI's API
- **Use design tokens natively** - no style overrides needed
- **Maintain same props, variants, and behavior** as Material UI
- **Build with Tailwind + CSS variables** for complete control

### Why This Approach?
1. **No style conflicts** - We own the entire component
2. **Full design system control** - Direct token application
3. **Better performance** - No competing styles
4. **Cleaner code** - No !important or complex overrides
5. **True component library** - Can be published separately

## Component Creation Process

### Step 1: Study the Material UI Component API
```javascript
// Example: Study MUI Button API
// Props: variant, size, color, disabled, startIcon, endIcon, fullWidth, etc.
// Variants: contained, outlined, text
// Sizes: small, medium, large
```

### Step 2: Create Custom Component with Same API
```javascript
// File: client/components/forms/Button.jsx
import React, { forwardRef } from 'react';
import { cn } from '@/lib/utils';

export const Button = forwardRef(({ 
  variant = 'contained',
  size = 'medium',
  color = 'primary',
  disabled = false,
  startIcon,
  endIcon,
  fullWidth = false,
  className,
  children,
  ...props 
}, ref) => {
  // Build styles using design tokens
  // ğŸš¨ CRITICAL: Always include 'font-sans' to ensure Figtree font is used!
  const baseStyles = 'inline-flex items-center justify-center font-sans font-medium transition-all duration-200';
  
  const variants = {
    contained: {
      primary: 'bg-primary-500 text-white hover:bg-primary-600 active:bg-primary-700',
      secondary: 'bg-secondary-500 text-white hover:bg-secondary-600 active:bg-secondary-700',
    },
    outlined: {
      primary: 'border-2 border-primary-500 text-primary-500 hover:bg-primary-50',
      secondary: 'border-2 border-secondary-500 text-secondary-500 hover:bg-secondary-50',
    },
    text: {
      primary: 'text-primary-500 hover:bg-primary-50',
      secondary: 'text-secondary-500 hover:bg-secondary-50',
    }
  };
  
  const sizes = {
    small: 'px-3 py-1.5 text-sm gap-1.5',
    medium: 'px-4 py-2 text-base gap-2',
    large: 'px-6 py-3 text-lg gap-2.5'
  };
  
  return (
    <button
      ref={ref}
      className={cn(
        baseStyles,
        variants[variant]?.[color],
        sizes[size],
        fullWidth && 'w-full',
        disabled && 'opacity-50 cursor-not-allowed pointer-events-none',
        className
      )}
      disabled={disabled}
      {...props}
    >
      {startIcon && <span className="inline-flex">{startIcon}</span>}
      {children}
      {endIcon && <span className="inline-flex">{endIcon}</span>}
    </button>
  );
});

Button.displayName = 'Button';
```

## Project Structure

```
client/
â”œâ”€â”€ components/           # Custom component library
â”‚   â”œâ”€â”€ forms/
â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”‚   â”œâ”€â”€ TextField.jsx
â”‚   â”‚   â”œâ”€â”€ Select.jsx
â”‚   â”‚   â”œâ”€â”€ Checkbox.jsx
â”‚   â”‚   â””â”€â”€ Switch.jsx
â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”œâ”€â”€ Tabs.jsx
â”‚   â”‚   â””â”€â”€ Breadcrumbs.jsx
â”‚   â”œâ”€â”€ data-display/
â”‚   â”‚   â”œâ”€â”€ Table.jsx
â”‚   â”‚   â”œâ”€â”€ Card.jsx
â”‚   â”‚   â””â”€â”€ List.jsx
â”‚   â”œâ”€â”€ feedback/
â”‚   â”‚   â”œâ”€â”€ Alert.jsx
â”‚   â”‚   â”œâ”€â”€ Dialog.jsx
â”‚   â”‚   â””â”€â”€ Snackbar.jsx
â”‚   â””â”€â”€ surfaces/
â”‚       â”œâ”€â”€ Paper.jsx
â”‚       â””â”€â”€ AppBar.jsx
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ utils.js         # cn utility for className merging
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ global.css       # Tailwind + custom styles
â”‚   â””â”€â”€ tokens.css       # Design system tokens
â””â”€â”€ App.tsx
```

## Design Token Application

### ğŸ”´ CRITICAL: Font Tokens MUST be defined first!
```css
:root {
  /* ğŸš¨ TYPOGRAPHY - THESE MUST BE SET! */
  --font-sans: 'Figtree', system-ui, -apple-system, sans-serif;
  --font-display: 'Figtree', system-ui, -apple-system, sans-serif;
  --font-body: 'Figtree', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;

  /* Color Palette - From design-tokens.md */
  --color-primary-50: #f5f3ff;
  --color-primary-100: #ede9fe;
  --color-primary-200: #ddd6fe;
  --color-primary-300: #c4b5fd;
  --color-primary-400: #a78bfa;
  --color-primary-500: #8b5cf6;
  --color-primary-600: #7c3aed;
  --color-primary-700: #6d28d9;
  --color-primary-800: #5b21b6;
  --color-primary-900: #4c1d95;
  
  /* Spacing Scale */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  
  /* Border Radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-full: 9999px;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}
```

### ğŸ”´ CRITICAL: Tailwind Font Configuration
```javascript
// tailwind.config.js
// âš ï¸ WITHOUT THIS, YOUR COMPONENTS WON'T USE FIGTREE!
module.exports = {
  theme: {
    extend: {
      fontFamily: {
        // ğŸš¨ MUST OVERRIDE DEFAULT SANS FONT!
        sans: ['Figtree', 'system-ui', '-apple-system', 'sans-serif'],
        display: ['Figtree', 'system-ui', '-apple-system', 'sans-serif'],
        body: ['Figtree', 'system-ui', '-apple-system', 'sans-serif'],
        mono: ['JetBrains Mono', 'Fira Code', 'monospace'],
      },
      colors: {
        primary: {
          50: 'var(--color-primary-50)',
          100: 'var(--color-primary-100)',
          // ... etc
          500: 'var(--color-primary-500)',
          600: 'var(--color-primary-600)',
          // ... etc
        }
      },
      spacing: {
        'xs': 'var(--spacing-xs)',
        'sm': 'var(--spacing-sm)',
        'md': 'var(--spacing-md)',
        'lg': 'var(--spacing-lg)',
        'xl': 'var(--spacing-xl)',
      }
    }
  }
}
```

## Component Categories & Examples

### Forms Components
- **Button**: All variants, sizes, states
- **TextField**: Input with label, helper text, error states
- **Select**: Dropdown with options
- **Checkbox**: With label support
- **RadioGroup**: Radio button groups
- **Switch**: Toggle switches
- **Slider**: Range sliders

### Navigation Components
- **Tabs**: Tab navigation
- **Breadcrumbs**: Breadcrumb navigation
- **Menu**: Dropdown menus
- **Drawer**: Side drawers
- **Stepper**: Step-by-step navigation

### Data Display Components
- **Table**: Data tables with sorting/filtering
- **Card**: Content cards
- **List**: Lists with items
- **Accordion**: Collapsible panels
- **Avatar**: User avatars
- **Badge**: Notification badges
- **Chip**: Tag chips

### Feedback Components
- **Alert**: Alert messages
- **Dialog**: Modal dialogs
- **Snackbar**: Toast notifications
- **Progress**: Progress indicators
- **Skeleton**: Loading skeletons

### Surface Components
- **Paper**: Elevated surfaces
- **AppBar**: Application bars
- **Toolbar**: Tool bars

## Component Documentation Template

```markdown
# [Component] Component

## API Reference

### Props
| Prop | Type | Default | Description |
|------|------|---------|-------------|
| variant | 'contained' \| 'outlined' \| 'text' | 'contained' | Button variant |
| size | 'small' \| 'medium' \| 'large' | 'medium' | Button size |
| color | 'primary' \| 'secondary' \| 'error' | 'primary' | Color scheme |
| disabled | boolean | false | Disabled state |
| fullWidth | boolean | false | Full width button |

### Usage Examples
\```jsx
<Button variant="contained" color="primary">
  Click Me
</Button>

<Button variant="outlined" size="large" fullWidth>
  Full Width Button
</Button>
\```

### Design Tokens Used
- Colors: primary-500, primary-600, primary-700
- Spacing: spacing-sm, spacing-md, spacing-lg
- Radius: radius-md
- Shadow: shadow-sm
```

## Implementation Guidelines

### 1. Start Simple
- Begin with basic props
- Add complexity gradually
- Test each variant thoroughly

### 2. Maintain Consistency
- Use consistent prop names across components
- Follow Material UI's API patterns
- Keep similar components aligned

### 3. Accessibility First
- Include proper ARIA attributes
- Support keyboard navigation
- Ensure color contrast compliance
- Add focus indicators

### 4. Performance Considerations
- Use forwardRef for all components
- Memoize expensive computations
- Lazy load heavy components

## Common Patterns

### Base Component Structure
```javascript
import { forwardRef } from 'react';
import { cn } from '@/lib/utils';

export const ComponentName = forwardRef(({ 
  // Common props
  className,
  children,
  ...props 
}, ref) => {
  return (
    <element
      ref={ref}
      className={cn(
        // Base styles - ALWAYS include 'font-sans'!
        'font-sans base-styles',
        // Conditional styles
        condition && 'conditional-styles',
        // User styles
        className
      )}
      {...props}
    >
      {children}
    </element>
  );
});

ComponentName.displayName = 'ComponentName';
```

### Variant Pattern
```javascript
const variants = {
  variant1: 'styles-for-variant1',
  variant2: 'styles-for-variant2',
};

const selectedVariant = variants[variant] || variants.default;
```

### Size Pattern
```javascript
const sizes = {
  small: 'text-sm px-2 py-1',
  medium: 'text-base px-4 py-2',
  large: 'text-lg px-6 py-3',
};

const selectedSize = sizes[size] || sizes.medium;
```

## Testing Strategy

### Component Testing Checklist
- [ ] All props work as expected
- [ ] Keyboard navigation works
- [ ] Focus states are visible
- [ ] Disabled state prevents interaction
- [ ] Component is accessible
- [ ] Responsive on all screen sizes
- [ ] Dark mode support (if applicable)

## Migration Path from Material UI

### Phase 1: Core Components
1. Button
2. TextField
3. Select
4. Checkbox
5. Card

### Phase 2: Navigation
1. Tabs
2. Menu
3. Breadcrumbs
4. Drawer

### Phase 3: Data Display
1. Table
2. List
3. Accordion
4. Avatar

### Phase 4: Feedback
1. Alert
2. Dialog
3. Snackbar
4. Progress

### Phase 5: Advanced
1. DataGrid
2. DatePicker
3. Autocomplete

## Success Metrics

A component is complete when:
- âœ… Matches Material UI's core API
- âœ… Uses design tokens exclusively
- âœ… No external UI library dependencies
- âœ… Fully accessible
- âœ… Well documented
- âœ… Includes usage examples
- âœ… Tested across browsers
- âœ… Responsive design
- âœ… Performs well

## DO's and DON'Ts

### DO's
- âœ… **ALWAYS configure Figtree font FIRST**
- âœ… **ALWAYS include 'font-sans' in component base styles**
- âœ… Create components from scratch using HTML/React
- âœ… Use Tailwind classes with design tokens
- âœ… Match Material UI's prop interface
- âœ… Include all common variants
- âœ… Make components fully accessible
- âœ… Use forwardRef for all components
- âœ… Document thoroughly

### DON'Ts
- âŒ **NEVER skip font configuration**
- âŒ **NEVER forget to include 'font-sans' in base styles**
- âŒ Import from @mui/material
- âŒ Try to override Material UI styles
- âŒ Use inline styles
- âŒ Hardcode color values
- âŒ Skip accessibility features
- âŒ Create overly complex APIs
- âŒ Forget about mobile responsiveness